<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Chat Messenger</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">
</head>

<body>
    <h1>App Chat SiÃªu Nhanh</h1>
    <ul id='messages'></ul>
    <form id="chat-form">
        <input type="text" id="chat-mes">
        <button id="send-chat">Gá»­i</button>
    </form>

    <!-- Bao gá»“m thÆ° viá»‡n Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
        // Káº¿t ná»‘i Ä‘áº¿n mÃ¡y chá»§ Socket.IO
        const socket = io();

        // YÃªu cáº§u ngÆ°á»i dÃ¹ng nháº­p tÃªn cá»§a há»
        const name = prompt('TÃªn cá»§a báº¡n lÃ  gÃ¬?');

        // Láº¥y cÃ¡c tham chiáº¿u Ä‘áº¿n cÃ¡c pháº§n tá»­ DOM
        const chatForm = document.querySelector('#chat-form');
        const chatMes = document.querySelector('#chat-mes');
        const messages = document.querySelector('#messages');

        // Bá»™ láº¯ng nghe sá»± kiá»‡n cho viá»‡c gá»­i biá»ƒu máº«u chat
        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            // Láº¥y tin nháº¯n tá»« trÆ°á»ng nháº­p
            const message = chatMes.value;
            // PhÃ¡t tin nháº¯n Ä‘áº¿n mÃ¡y chá»§ vá»›i tÃªn cá»§a ngÆ°á»i dÃ¹ng
            socket.emit('on-chat', { name: name, message: message });
            // XÃ³a trÆ°á»ng nháº­p
            chatMes.value = '';
        });

        // Bá»™ láº¯ng nghe sá»± kiá»‡n Ä‘á»ƒ nháº­n tin nháº¯n tá»« mÃ¡y chá»§
        socket.on('user-chat', (data) => {
            console.log("ğŸš€ ~ socket.on ~ data:", data)
            // Táº¡o má»™t má»¥c danh sÃ¡ch má»›i Ä‘á»ƒ hiá»ƒn thá»‹ tin nháº¯n
            const chatItem = document.createElement('li');
            // Äáº·t ná»™i dung vÄƒn báº£n cá»§a má»¥c danh sÃ¡ch Ä‘á»ƒ bao gá»“m tÃªn cá»§a ngÆ°á»i gá»­i vÃ  tin nháº¯n
            chatItem.textContent = `${data.name} : ${data.message}`;
            // ThÃªm má»¥c danh sÃ¡ch vÃ o danh sÃ¡ch tin nháº¯n
            messages.appendChild(chatItem);
        });
    </script>

</body>

</html>